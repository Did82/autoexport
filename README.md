# AutoExport

Система для автоматизированного экспорта данных с веб-интерфейсом, разработанная с использованием Bun, Next.js и TypeScript.

## Требования

-   [Docker](https://www.docker.com/)
-   [Docker Compose](https://docs.docker.com/compose/)
-   [Bun](https://bun.sh/) (для локальной разработки)

## Структура проекта

```
autoexport/
├── packages/
│   ├── backend/         # Бэкенд на Bun + Elysia
│   └── frontend/        # Фронтенд на Next.js
├── docker-compose.yml
└── README.md
```

## Быстрый старт

1. Создайте Docker сеть:

```bash
docker network create export
```

2. Настройте пути монтирования в `docker-compose.yml`:

```yaml
volumes:
    - /путь/к/исходной/директории:/data/src
    - /путь/к/целевой/директории:/data/trg
```

3. Запустите приложение:

```bash
docker compose up -d
```

После запуска:

-   Веб-интерфейс доступен по адресу: http://localhost:3000
-   API бэкенда доступен по адресу: http://localhost:3001

## Локальная разработка

1. Установите зависимости:

```bash
bun install
```

2. Настройте конфигурацию в `packages/backend/config.json`

3. Запустите в режиме разработки:

```bash
# Запуск всех пакетов
bun dev

# Или по отдельности:
cd packages/backend && bun dev
cd packages/frontend && bun dev
```

## Конфигурация

Основные настройки находятся в `packages/backend/config.json`:

```json
{
    "src": "/data/src", // Путь к исходной директории
    "dest": "/data/trg", // Путь к целевой директории
    "limit": 78, // Лимит использования диска в процентах
    "concurrency": 1, // Количество параллельных операций копирования
    "cleanupDays": 90 // Количество дней хранения логов
}
```

## Функциональность

-   Автоматическое копирование данных по расписанию
-   Контроль дискового пространства
-   Веб-интерфейс для мониторинга:
    -   Использование дискового пространства
    -   Логи копирования
    -   Логи удаления
    -   Логи ошибок
-   Темная/светлая тема

## Cron-задачи

-   Копирование текущего дня: каждый час
-   Копирование вчерашнего дня: ежедневно в 22:30
-   Контроль дискового пространства: ежедневно в 03:00
-   Очистка старых логов: ежедневно в 05:00

## Лицензия

MIT
